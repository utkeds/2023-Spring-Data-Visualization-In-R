---
title: "Week 3 Slides"
subtitle: "How do I wrangle data?"
author: "**Joshua Rosenberg and Isabella Velásquez**"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)

style_duo_accent(
    primary_color = "#FF8200",
    secondary_color = "#58595B",
    link_color = "blue",
    title_slide_text_color = "#222943",
    title_slide_background_color = "#ededed",
    title_slide_background_image = "https://brand.utk.edu/wp-content/uploads/2019/02/University-HorizRightLogo-RGB.png",
    title_slide_background_position = "bottom",
    title_slide_background_size = "30%"
)
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r, echo=FALSE}
# then load all the relevant packages
pacman::p_load(pacman, knitr, tidyverse, readxl)
```

```{r xaringanExtra-clipboard, echo=FALSE}
# these allow any code snippets to be copied to the clipboard so they 
# can be pasted easily
htmltools::tagList(
    xaringanExtra::use_clipboard(
        button_text = "<i class=\"fa fa-clipboard\"></i>",
        success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    ),
    rmarkdown::html_dependency_font_awesome()
)
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

# Purpose and Agenda

This week, we answer the following question: What's this class all about?

## What we'll do in this presentation

- Recap
- A bit more introductions
- Reading discussion in whole group chat
- Key concept #1 - dplyr verbs
- Key concept #2 - stringr and forcats
- Code-along
- What’s next

---

# Recap

- Last week, we:
  - Reviewed the [syllabus](https://docs.google.com/document/d/1FItWUb46iL5cxvFW6TIf02BDtt7Q0I_OE-aS_HhOSIw/edit)
  - Discussed two key concepts: #1) the repetitive structure of the coruse and 2) how the theoretically-focused aspect of this course will build on your intuitions
  - Did a code-along that led into the assignment
  - Read a chapter by Healy
  
---

# A bit more introductions

## Josh

A few projects...

- CREDIBLE
- konfound
- T(CA)^2
- Social media and students' right to privacy
- ESM

## Isabella

Introduction! And office hours next week (and four classes)

https://utk.instructure.com/courses/196893/external_tools/1509

---

# Reading discussion

1. The reading emphasizes the idea that "everything is an object" in R. Discuss how this concept influences the way data scientists approach problem-solving and coding in R.
2. How does the use of packages, like tidyverse and ggplot2, enhance the capabilities of R for data visualization? Discuss the importance of community-contributed packages in the R ecosystem.

---
---

class: center, middle, inverse

# R Fundamentals

## A Review

<!-- This section is socratic - ask students what they think a function does, demonstrate it, expand on it -->

---

# Data Wrangling Fundamentals

<!-- 1 -->

Let's review some super common functions. Given the table on the left, what do the functions on the right do?

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  slice(1:5) %>%
  select(1:5) %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `select(name, height)`
]

---

# Data Wrangling Fundamentals

<!-- 2 -->

Let's review some super common functions. Given the table on the left, what do the functions on the right do?

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars <- starwars %>%
  slice(1:5) %>%
  select(1:5)

starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `select(name, height)`
Use this to **select columns**

```{r}
starwars %>%
  select(name, height)
```


]

---

# Data Wrangling Fundamentals 

<!-- e -->

Let's review some super common functions. Given the table on the left, what do the functions on the right do?

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `select(name, height)`

**Note** These are the same!

```{r echo=TRUE, eval=FALSE}
starwars %>%
  select(name, height)

select(starwars, name, height)

```


]
---
class: center, middle

# R Fundamentals

What the heck is `%>%` ?

---

# R Fundamentals - What the heck is `%>%` ?

The pipe operator `%>%` connects functions together into a *chain* of step-by-step commands. It can be translated as **and then**.

Below, R is written on the left and an English translation is written on the right:

.pull-left[

### R

```{r, echo=TRUE, EVAL = FALSE, warning=TRUE}
starwars %>%
  select(name, height) %>%
  glimpse()
  
```

]

--

.pull-right[

### English

1. Take the starwars data set *and then*  
2. `select` the name and height columns *and then*  
3. `view` the result in R Studio
]


---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `filter(mass >= 50)`

]

---

# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `filter(mass >= 50)`
Use this to **filter rows**

```{r}
starwars %>%
  filter(mass >= 50)
```


]

---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `str(starwars)`


]


---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `str(starwars)`
Use this to see the **structure** of an object
```{r}
str(starwars)
```

]

---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `head(starwars)`


]
---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `head(starwars)`
Use this to **see the first 10 (or fewer/more) rows**

```{r}
head(starwars, 1)
head(starwars)
```


]
---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `rename("weight" = mass)`



]
---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `rename("weight" = mass)`
Use this to **rename** a column


```{r}
starwars %>%
  rename("weight" = mass)
```
]

---
# Data Wrangling Fundamentals

.pull-left[
**An Example Data Frame - starwars**

```{r echo=FALSE}
starwars %>%
  knitr::kable(format = "html")
```
]

.pull-right[
### `mutate` Challenge
1. How many columns do we expect?
2. What does each line do?
3. Can we simplify it?


```{r eval=FALSE, include=TRUE}
starwars %>%
  mutate(one = height^2) %>%
  mutate(two = height*mass) %>%
  mutate(hair_color = ifelse(is.na(hair_color),
                             "unknown", hair_color))
```
]
---

# Data Wrangling Fundamentals

### `mutate` Challenge

```{r}
starwars %>%
  mutate(one = height^2) %>%
  mutate(two = height*mass) %>%
  mutate(hair_color = ifelse(is.na(hair_color),
                             "unknown", hair_color))
```

---

# Data Wrangling Fundamentals


### `mutate` Challenge

```{r}
starwars %>%
  mutate(one = height^2,
         two = height*mass,
         hair_color = ifelse(is.na(hair_color),
                             "unknown", hair_color))
```

---

# Key Concept #2: stringr and forcats

These are super handy:

**stringr**: an R package for working with character strings
**forcats**: an R package for working with factors

---

# stringr

```{r}

```

---

# forcats

```{r}

```

---
# R Data Wrangling Code-along

Check out the Week 3 Code-along

.panelset[


.panel[.panel-name[Weekly Assignment]

]
]

---

# What's next?

.panelset[


.panel[.panel-name[Weekly Assignment]

- We'll be doing more with ggplot2 this week
  - In fact, we'll be doing more all semester
  - I'll let you know when it's really important to understand the specifics of the 
]

.panel[.panel-name[Data]

- We'll use a dataset you'll need to download and move to a folder in RStudio; let's do that together now
- Specifically, we'll be using [gapminder](https://www.gapminder.org/) data at the country-level

]

.panel[.panel-name[Reading(s)]

> Healy (2018), [chapter 2](https://socviz.co/gettingstarted.html#gettingstarted)

Linked in Canvas, as well as here.

]

.panel[.panel-name[Office hours]

- Friday at 2:00 pm with Josh
- Also via calendly from Josh: https://calendly.com/joshuamrosenberg/15-minute-meeting

]

]

---

# Check out

- What's one thing you took away from today?
- What's one thing you want to learn more about?
